<html>
	<head>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">

	</head>

	<body>
		<h1> Relatório lab 1 </h1>

		<br>
		
		<h2> 1.Introdução </h2>
		
		<p>Este relatório descreve a atividade realizada com o objetivo de iniciar os trabalhos no Ubuntu com o OpenCV, uma biblioteca utilizada para processamento de imagens e vídeos. A atividade consistiu em explorar comandos básicos para visualização e gravação de imagens e vídeos, assim como realizar alterações nos programas fornecidos.</p>	
		
		<p>O relatório está organizado em três partes principais. Na primeira parte, foi realizada a preparação do ambiente de trabalho, seguindo as instruções fornecidas no Moodle e baixando os arquivos do Lab1 - Parte 1.</p>

		<p>Na segunda parte, focamos no processamento básico de imagens e vídeos. Foram disponibilizados quatro programas, nos quais estudamos diferentes operações e realizamos alterações solicitadas. Isso incluiu a leitura de imagens e vídeos a partir de arquivos, ajuste de velocidade de exibição, leitura de imagens da câmera e gravação de vídeos da câmera.</p>

		<p>A terceira parte envolveu a obtenção de fotos e vídeos com a webcam, utilizando os programas corrigidos da parte anterior. Foi solicitado que capturássemos uma foto geral do grupo, realizássemos uma montagem de avatares individuais e gravássemos vídeos com diferentes tipos de movimento.</p>

		<p>Ao longo deste relatório, serão apresentados os programas elaborados pela equipe para cada etapa, descrevendo as alterações realizadas e as soluções adotadas.</p>
		
		<br>
		<h2> 2.Fundamentos Básicos</h2>

		<p>Neste tópico, abordaremos os fundamentos básicos que foram utilizados durante as atividades realizadas. Esses conceitos são essenciais para compreender e explorar as funcionalidades do OpenCV, bem como realizar o processamento de imagens e vídeos.</p>

		<h3>1. Processamento de Imagens e Vídeos:</h3>

		<p>O processamento de imagens e vídeos refere-se às técnicas e algoritmos utilizados para modificar ou analisar esses tipos de mídia digital. O objetivo principal é extrair informações relevantes ou realizar melhorias nas imagens e vídeos, como ajuste de brilho, detecção de bordas, segmentação de objetos, entre outros.</p>

		<h3>2. Biblioteca OpenCV:</h3>

		<p>O OpenCV (Open Source Computer Vision Library) é uma biblioteca de código aberto amplamente utilizada para processamento de imagens e visão computacional. Ela oferece uma vasta gama de funções e algoritmos otimizados para realizar tarefas comuns nessa área, como leitura e gravação de imagens e vídeos, manipulação de pixels, detecção de objetos, entre outros.</p>

		<h3>3. Leitura e Gravação de Imagens:</h3>

		<p>A leitura de imagens envolve a extração dos dados contidos em um arquivo de imagem específico e sua representação na memória do computador. Já a gravação de imagens consiste em salvar uma imagem processada ou capturada em um arquivo. Essas operações são fundamentais para carregar imagens para processamento e salvar os resultados obtidos.</p>

		<h3>4. Leitura e Gravação de Vídeos:</h3>

		<p>A leitura de vídeos envolve a reprodução sequencial de uma sequência de imagens em alta velocidade, criando a ilusão de movimento. A gravação de vídeos, por sua vez, consiste em capturar e salvar essa sequência de imagens em um arquivo. Essas operações são utilizadas para processar e armazenar informações visuais dinâmicas.</p>

		<h3>5. Manipulação de Velocidade de Exibição:</h3>

		<p>A manipulação da velocidade de exibição de imagens ou vídeos está relacionada ao controle da taxa de quadros (frames per second - FPS) durante a reprodução. É possível ajustar essa taxa para aumentar ou diminuir a velocidade de exibição, resultando em uma reprodução mais rápida ou mais lenta das imagens ou vídeos.</p>

		<h3>6. Interação com a Câmera:</h3>

		<p>A interação com a câmera envolve a captura de imagens em tempo real por meio de dispositivos de câmera conectados ao computador. Isso permite a leitura de imagens da câmera em tempo real e a gravação de vídeos com base nessas imagens, abrindo possibilidades para aplicativos de visão computacional em tempo real.</p>

		<br>
		<h2> 3.Materiais e Métodos</h2>

		<h3>Diagrama de blocos funcional</h3>

		<h3>1. Ambiente dos experimentos</h3>

		<p>a) Sistema Operacional:</p>
		<p>- Ubuntu (versão 20.22)</p>

		<p>b) Equipamentos:</p>
		<p>- Computador com webcam integrada</p>
		<p>- Monitor de exibição</p>

		<h3>2. Programas e Bibliotecas utilizadas</h3>

		<p>a) Programas:</p>
		<p>- Python (versão X.XX): Linguagem de programação utilizada para desenvolver os programas.</p>

		<p>b) Bibliotecas:</p>
		<p>- OpenCV (versão 4.7.0): Biblioteca principal para manipulação de imagens e vídeos.</p>
		<p>- NumPy (versão 1.21.5): Biblioteca para operações numéricas e processamento de arrays.</p>
		<p>- Time (versão X.X.X): Biblioteca para aumentar o tempo para tirar as fotos.</p>

		<h3>2. Softwares adicionais</h3>

		<p>a) Editor de Imagens:</p>
		<p>- </p>

		<br>
		<h2> 4.Resultados e Análises</h2>

		<h3> Parte 2A </h3>
		<h4> Código Original</h4>
		<pre><code class="python">
import numpy as np
import cv2 as cv

img = cv.imread('messi5.jpg',0)
cv.imshow('image',img)
k = cv.waitKey(0)
if k == 27:         # wait for ESC key to exit
    cv.destroyAllWindows()
elif k == ord('s'): # wait for 's' key to save and exit
    cv.imwrite('messigray.png',img)
    cv.destroyAllWindows()
		</code></pre>
		<p> O código acima le um arquivo de imagem e o exibe na tela.Depois, espera por um input do usuário para salvar a imagem ou fechar a janela</p>
		<p><b><br>Pergunta: Por que a janela aberta não mostra a imagem colorida?</b></p>
		<p>A imagem é lida do arquivo através da função cv.imread(), seu segundo argumento recebe uma flag que diz como a cor do arquivo deve ser interpretada. Essa flag possui 3 valores possíveis:
		<ul>
			<li>cv2.IMREAD_GRAYSCALE ou 0: Carrega a imagem em escala de cinza</li>
			<li>cv2.IMREAD_COLOR ou 1: Carrega apenas a cor da imagem, negligenciando a transparência</li>
			<li>cv2.IMREAD_UNCHANGED ou -1: Carrega a imagem sem nenhuma modificação</li>
		</ul> 
		Sendo assim, podemos concluir que janela aberta não mostra a imagem colorida porque o segundo parâmetro do cv.imread() é 0.
		Podemos corrigir esse comportamento alterando a linha correspondente no código.
		<pre><code class="python">
img = cv.imread('messi5.jpg',-1)
		</code></pre>

		</p>
		<h3> Parte 2B </h3>
		<h4> Código Original</h4>
		<pre><code class="python">
import time
import numpy as np
import cv2 as cv

cap = cv.VideoCapture('big_buck_bunny.mp4')

while(cap.isOpened()):
    ret, frame = cap.read()
    
    if ret==True:
        # show the frame
        cv.imshow('frame',frame)

        #wait next frame by 40ms - 25fps
        time.sleep(1/25.0) 
        
        if cv.waitKey(1) & 0xFF == ord('q'):
            break
    else:
        break
		</code></pre>
		<p> O Código acima le um arquivo de vídeo com a função cv.VideoCapture() (ela também poderia ser usada para ler o vídeo de uma camera ou outra fonte).
			<br> Depois, vai exibir um frame de cada vez enquanto o usuário não fechar o programa apertando 'q'.
			O frame exibido na tela só é atualizado com a função cv.imshow(), como entre cada chamada dessa função o programa congela por meio da função time.sleep(), sendo seu arquivomento esse tempo em segundos, que no caso acima é de 40ms.
		</p>

		<br>
		<p> Reduzindo o valor do argumento da função sleep, as imagens são exibidas mais rapidamente. No código abaixo diminuimos o tempo entre as imagens para 10ms</p>
		<pre><code class="python">
        #wait next frame by 10ms - 100fps
        time.sleep(1/100.0) 
		</code></pre>
		<p> Aumentando o valor do argumento da função sleep, as imagens são exibidas mais lentamente. No código abaixo aumentamos o tempo entre as imagens para 100ms</p>
		<pre><code class="python">
        #wait next frame by 100ms - 10fps
        time.sleep(1/10.0) 
		</code></pre>
               
cap.release()
cv.destroyAllWindows()
		<h3> Parte 2C </h3>
		<h3> Parte 2D </h3>
		<h3> Parte 3A </h3>
		<h3> Parte 3B </h3>
		<h3> Parte 3C </h3>

		<br>
		<h2> 5.Conclusões e Comentários Finais</h2>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
	<script>
		hljs.highlightAll();
	</script>
	</body>
</html>
